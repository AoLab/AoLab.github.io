graph architecture {
	graph [fontname = "roboto"];
	node [fontname = "roboto"];
	edge [fontname = "roboto", fontsize=8];

	subgraph layers_graph {
		node [shape=plaintext, fontsize=16];
		"Application" -- "Middleware" -- "Field" -- "";
	}

	{
		rank=same;
		"Middleware"; i1820; influx;
	}

	{
		rank=same;
		agent1; agent2; agent3;
	}

	{
		rank=same
		"Application"; aps; dan; scs;
	}

	{
		rank=same;
		"Field"; master;
	}

	aps -- i1820;
	dan -- i1820;
	scs -- i1820;
	i1820 -- influx [label="REST"]
	i1820 -- broker [headlabel="MQTT", labeldistance=3, labelangle=30];
	broker -- agent1 [headlabel="MQTT", labeldistance=3];
	broker -- agent2 [headlabel="MQTT", labeldistance=3, labelangle=30];
	broker -- agent3 [headlabel="MQTT", labeldistance=3];
	agent1 -- master [label="Serial"];
	master -- ts [label="nRF"];
	master -- ta [label="nRF"];

	aps [shape=box, label="Application\nServer", fillcolor="#d11141", style=filled];
	dan [shape=box, label="Data\nAnalyzer", fillcolor="#d11141", style=filled];
	scs [shape=box, label="Scenario\nServer", fillcolor="#d11141", style=filled];
	i1820 [shape=diamond, label="I1820\nServer", fillcolor="#f37735", style=filled, width=1, fontcolor="#ffffff"];
	influx [shape=box, label="InfluxDB", fillcolor="#999dab", style=filled];
	broker [shape=hexagon, label="EMQT\nBroker", fillcolor="#00ab6b", style=filled; fontcolor="#ffffff"];
	agent1 [shape=circle, label="I1820\nAgent", fillcolor="#ffc425", style=filled, width=1];
	agent2 [shape=circle, label="I1820\nAgent", fillcolor="#ffc425", style=filled, width=1];
	agent3 [shape=circle, label="I1820\nAgent", fillcolor="#ffc425", style=filled, width=1];
	master [shape=circle, label="Master", fillcolor="#00aedb", style=filled, fontsize=10, width=.8, fixedsize=true];
	ts [shape=circle, label="S", fillcolor="#00b159", style=filled, fontsize=10, width=.5, fixedsize=true];
	ta [shape=circle, label="A", fillcolor="#00b159", style=filled, fontsize=10, width=.5, fixedsize=true];
}
