graph architecture {
	{
		node [shape=plaintext, fontsize=16];
		/* the layer-line graph */
		"Application" -- "Middleware" -- "Field" -- "";
	}

	{
		rank=same;
		"Middleware"; i1820;
	}

	{
		rank=same;
		agent1; agent2; agent3;
	}

	{
		rank=same
		"Application"; aps; dan; scs;
	}

	{
		rank=same;
		"Field"; master;
	}

	aps -- i1820;
	dan -- i1820;
	scs -- i1820;
	i1820 -- agent1 [label="MQTT", fontsize=8];
	i1820 -- agent2 [label="MQTT", fontsize=8];
	i1820 -- agent3 [label="MQTT", fontsize=8];
	agent1 -- master [label="Serial", fontsize=8];
	master -- ts [label="nRF Mesh", fontsize=8];
	master -- ta [label="nRF Mesh", fontsize=8];

	aps [shape=box, label="Application\nServer", fillcolor="#d11141", style=filled];
	dan [shape=box, label="Data\nAnalyzer", fillcolor="#d11141", style=filled];
	scs [shape=box, label="Scenario\nServer", fillcolor="#d11141", style=filled];
	i1820 [shape=diamond, label="I1820 Server", fillcolor="#f37735", style=filled, width=1.8];
	agent1 [shape=circle, label="I1820\nAgent", fillcolor="#ffc425", style=filled, width=1];
	agent2 [shape=circle, label="I1820\nAgent", fillcolor="#ffc425", style=filled, width=1];
	agent3 [shape=circle, label="I1820\nAgent", fillcolor="#ffc425", style=filled, width=1];
	master [shape=circle, label="Master", fillcolor="#00aedb", style=filled, fontsize=10, width=.8, fixedsize=true];
	ts [shape=circle, label="S", fillcolor="#00b159", style=filled, fontsize=10, width=.5, fixedsize=true];
	ta [shape=circle, label="A", fillcolor="#00b159", style=filled, fontsize=10, width=.5, fixedsize=true];
}
